webpackJsonp([7,11],{1:function(e,t){e.exports=function(e,t,a,r){var o,l=e=e||{},i=typeof e.default;"object"!==i&&"function"!==i||(o=e,l=e.default);var s="function"==typeof l?l.options:l;if(t&&(s.render=t.render,s.staticRenderFns=t.staticRenderFns),a&&(s._scopeId=a),r){var n=s.computed||(s.computed={});Object.keys(r).forEach(function(e){var t=r[e];n[e]=function(){return t}})}return{esModule:o,exports:l,options:s}}},6:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=a(8),l=r(o);t.default=l.default||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}},11:function(e,t){"use strict";function a(e){var t=e.getFullYear(),a=e.getMonth()+1,o=e.getDate(),l=e.getHours(),i=e.getMinutes(),s=e.getSeconds();return[t,a,o].map(r).join("/")+" "+[l,i,s].map(r).join(":")}function r(e){return e=e.toString(),e[1]?e:"0"+e}function o(e){var t=parseInt(e),a=0,r=0;t>60&&(a=parseInt(t/60),t=parseInt(t%60),a>60&&(r=parseInt(a/60),a=parseInt(a%60)));var o="";return t>0&&(o=""+parseInt(t)+"秒"),a>0&&(o=""+parseInt(a)+"分钟"+o),r>0&&(o=""+parseInt(r)+"小时"+o),o}function l(e){var t=6e4,a=60*t,r=24*a,o=30*r,l=(new Date).getTime(),s=l-i(e),n=s/o,d=s/(7*r),u=s/r,c=s/a,p=s/t;return n>=1?result=parseInt(n)+"个月前":d>=1?result=parseInt(d)+"周前":u>=1?result=parseInt(u)+"天前":c>=1?result=parseInt(c)+"个小时前":p>=1?result=parseInt(p)+"分钟前":result="刚刚",result}function i(e){return Date.parse(e.replace(/-/gi,"/"))}function s(e){var e=new Date(e),t=e.getMinutes(),a=e.getSeconds();return r(t)+":"+r(a)}e.exports={formatTime:a,formatSeconds:o,getDateDiff:l,formatduration:s}},144:function(e,t,a){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var l=a(6),i=o(l),s=a(8),n=o(s),d=a(4),u=o(d),c=a(11),p=(o(c),a(7)),f=(o(p),a(12)),m=a(13),g=(r(m),a(14)),h=(r(g),a(15));r(h);a(244);var y={day1:[],day2:[],day3:[],day4:[],day5:[],day6:[],day7:[]},v=11;t.default={name:"cc-SupervisorIndex",data:function(){return{btnDeleteDisable:!0,dialogTitle:"",dialogForm:{title:"",name:""},dialogFormVisible:!1,formLabelWidth:"120px",dialogType:"ADD",selectedWeek:1,listSelectedWeek:1,hang:[1,2,3,4,5,6,7,8,9,10,11],wholeSpareList:(0,n.default)({},y)}},beforeCreate:function(){u.default.log("--SupervisorIndex.Vue--Lifecycle:beforeCreate")},created:function(){u.default.log("--SupervisorIndex.Vue--Lifecycle:created");var e=this;e.requestSupervisorList((0,i.default)({},e.$route.query,{collegeId:Number(localStorage.getItem("loginCollegeId"))}))},beforeMount:function(){u.default.log("--SupervisorIndex.Vue--Lifecycle:beforeMount")},mounted:function(){u.default.log("--SupervisorIndex.Vue--Lifecycle:mounted")},updated:function(){u.default.log("--SupervisorIndex.Vue--Lifecycle:updated")},activated:function(){u.default.log("--SupervisorIndex.Vue--Lifecycle:activated")},deactivated:function(){u.default.log("--SupervisorIndex.Vue--Lifecycle:deactivated")},beforeDestroy:function(){u.default.log("--SupervisorIndex.Vue--Lifecycle:beforeDestroy"),this.resetSupervisiorState()},destroyed:function(){u.default.log("--SupervisorIndex.Vue--Lifecycle:destroyed")},components:{},computed:(0,i.default)({},(0,f.mapGetters)(["getSupervisorList","getSupervisorListElements","getWholeSparaList"])),watch:{selectedWeek:function(e){var t=this;t.checkHadChangeCheckBox()&&t.dialogFormVisible?u.default.showMsgBox({context:t,msg:"是否保存当前当前督导安排？",showCancelButton:!0,beforeClose:function(a,r,o){"confirm"===a?t.requestSparaTimeUpdate({body:t.getUpdateBody(),success:function(a){e&&t.dialogForm.userId&&t.doReuqestSpareList({userId:t.dialogForm.userId,selectedWeek:e})}}):"cancel"===a&&e&&t.dialogForm.userId&&t.doReuqestSpareList({userId:t.dialogForm.userId,selectedWeek:e}),o()}}):e&&t.dialogForm.userId&&t.doReuqestSpareList({userId:t.dialogForm.userId,selectedWeek:e})}},methods:(0,i.default)({},(0,f.mapMutations)(["resetSupervisiorState"]),(0,f.mapActions)(["requestSupervisorList","requestDeleteSparaTime","reuqestSpareList","requestSparaTimeUpdate","reuqestSparaTimeAutoCreate"]),{checkHadChangeCheckBox:function(){for(var e=this,t=e.wholeSpareList,a=e.getWholeSparaList,r=!0,o=0;o<v&&(r=t.day1[o]===a.day1[o]&&t.day2[o]===a.day2[o]&&t.day3[o]===a.day3[o]&&t.day4[o]===a.day4[o]&&t.day5[o]===a.day5[o]&&t.day6[o]===a.day6[o]&&t.day7[o]===a.day7[o],r);o++);return!r},handleSelectionChange:function(){},handleCurrentChange:function(e){var t=this;t.replaceRouter({name:t.$route.name,query:(0,i.default)({},t.$route.query,{page:e,collegeId:Number(localStorage.getItem("loginCollegeId"))})})},doReuqestSpareList:function(e){var t=this;t.reuqestSpareList({id:e.userId,week:t.selectedWeek,success:function(e){(0,n.default)(t.wholeSpareList,u.default.transSpareTimeToWholeSpareTime(e.data.data,v))}})},showDialog:function(e){var t=this;e?(t.doReuqestSpareList(e),t.dialogForm=(0,n.default)({},e),t.dialogType="UPDATE",t.dialogTitle="修改空闲时间"):(t.dialogType="ADD",t.dialogTitle="增加督导员"),t.dialogFormVisible=!0},handleDialogCancel:function(){var e=this;e.resetDialogForm(),e.dialogFormVisible=!1,e.requestSupervisorList((0,i.default)({},e.$route.query,{collegeId:Number(localStorage.getItem("loginCollegeId"))}))},resetDialogForm:function(){var e=this;e.dialogForm={title:"",name:""},(0,n.default)(e.wholeSpareList,y),e.selectedWeek=1},handleDelete:function(e,t){var a=this;u.default.showMsgBox({context:a,msg:"是否确认删除",showCancelButton:!0,beforeClose:function(e,r,o){"confirm"===e&&(a.requestDeleteSparaTime({teacherId:t.userId,userId:localStorage.getItem("userId")}),o())}})},replaceRouter:function(e){var t=this;t.$router.replace(e),t.requestSupervisorList((0,i.default)({},e.query))},getCurrentPage:function(){var e=this;return e.$route.query.page?Number(e.$route.query.page):1},saveSparaTime:function(){var e=this;e.requestSparaTimeUpdate({body:e.getUpdateBody()})},autoCreateSparaTime:function(){var e=this;e.reuqestSparaTimeAutoCreate({userId:e.dialogForm.userId?e.dialogForm.userId:"",teacherId:e.dialogForm.teacherId?e.dialogForm.teacherId:-1,end:e.selectedWeek,start:e.selectedWeek,success:function(t){e.doReuqestSpareList({userId:e.dialogForm.userId})}})},getUpdateBody:function(){for(var e=this,t=[],a={week:e.selectedWeek,uid:e.dialogForm.userId,cid:e.dialogForm.collegeId},r=["","","","","","","",""],o=1;o<=v;o++)e.wholeSpareList.day1[o-1]&&(r[1]=r[1]+","+o.toString()),e.wholeSpareList.day2[o-1]&&(r[2]=r[2]+","+o.toString()),e.wholeSpareList.day3[o-1]&&(r[3]=r[3]+","+o.toString()),e.wholeSpareList.day4[o-1]&&(r[4]=r[4]+","+o.toString()),e.wholeSpareList.day5[o-1]&&(r[5]=r[5]+","+o.toString()),e.wholeSpareList.day6[o-1]&&(r[6]=r[6]+","+o.toString()),e.wholeSpareList.day7[o-1]&&(r[7]=r[7]+","+o.toString());for(var l=1;l<=7;l++)t.push((0,n.default)({},a,{day:l,scope:r[l].substring(1)}));return t},unSelectAll:function(){this.wholeSpareList=(0,n.default)(this.wholeSpareList,y)}})}},203:function(e,t,a){t=e.exports=a(2)(),t.push([e.id,".SupervisorIndex-box .el-dialog{top:5%!important}","",{version:3,sources:["/./src/pages/index/supervisor-index/SupervisorIndex.vue"],names:[],mappings:"AACA,gCACE,gBAAmB,CACpB",file:"SupervisorIndex.vue",sourcesContent:["\n.SupervisorIndex-box .el-dialog {\n  top: 5% !important;\n}\n"],sourceRoot:"webpack://"}])},210:function(e,t,a){t=e.exports=a(2)(),t.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",file:"SupervisorIndex.css",sourceRoot:"webpack://"}])},232:function(e,t,a){var r=a(203);"string"==typeof r&&(r=[[e.id,r,""]]);a(3)(r,{});r.locals&&(e.exports=r.locals)},244:function(e,t,a){var r=a(210);"string"==typeof r&&(r=[[e.id,r,""]]);a(3)(r,{});r.locals&&(e.exports=r.locals)},275:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"SupervisorIndex-box"},[a("el-table",{staticClass:"tempform-table",staticStyle:{width:"100%"},attrs:{border:"",data:e.getSupervisorList}},[a("el-table-column",{attrs:{prop:"userName",label:"督导员",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{prop:"spareWeek",label:"已填写空闲时间","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"opertate",label:"操作",width:"180"},scopedSlots:e._u([["default",function(t){return[a("el-button",{attrs:{size:"small"},on:{click:function(a){e.showDialog(t.row)}}},[e._v("修改")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(a){e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}]])})],1),e._v(" "),a("div",{staticClass:"block ta-c mg-top10"},[a("el-pagination",{attrs:{"current-page":e.getCurrentPage(),"page-size":10,layout:"prev, pager, next, jumper",total:e.getSupervisorListElements},on:{"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:e.dialogTitle,modal:!1,"show-close":!1},model:{value:e.dialogFormVisible,callback:function(t){e.dialogFormVisible=t},expression:"dialogFormVisible"}},[a("el-form",{attrs:{model:e.dialogForm}},[a("el-form-item",{attrs:{label:"教师姓名:","label-width":e.formLabelWidth}},[a("el-input",{attrs:{readonly:"ADD"!==e.dialogType,"auto-complete":"off",minlength:1},model:{value:e.dialogForm.userName,callback:function(t){e.dialogForm.userName=t},expression:"dialogForm.userName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"周数","label-width":e.formLabelWidth}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.selectedWeek,callback:function(t){e.selectedWeek=t},expression:"selectedWeek"}},e._l(20,function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"课表","label-width":e.formLabelWidth}},[a("el-button",{staticClass:"mg-bottom10",on:{click:e.autoCreateSparaTime}},[e._v("自动填补")]),e._v(" "),a("el-button",{staticClass:"mg-bottom10",on:{click:e.saveSparaTime}},[e._v("保存")]),e._v(" "),a("el-button",{staticClass:"mg-bottom10",on:{click:e.unSelectAll}},[e._v("清空")]),e._v(" "),a("el-table",{staticClass:"tempform-table",staticStyle:{width:"618px"},attrs:{data:e.hang}},[a("el-table-column",{attrs:{width:"55"},scopedSlots:e._u([["default",function(t){return[a("span",[e._v(e._s(t.$index+1))])]}]])}),e._v(" "),a("el-table-column",{attrs:{label:"星期一",width:"80"},scopedSlots:e._u([["default",function(t){return[a("el-checkbox",{key:"day1"+t.$index+" ",attrs:{disabled:!e.selectedWeek},model:{value:e.wholeSpareList.day1[t.$index],callback:function(a){var r=e.wholeSpareList.day1,o=t.$index;Array.isArray(r)?r.splice(o,1,a):e.wholeSpareList.day1[t.$index]=a},expression:"wholeSpareList.day1[scope.$index]"}})]}]])}),e._v(" "),a("el-table-column",{attrs:{label:"星期二",width:"80"},scopedSlots:e._u([["default",function(t){return[a("el-checkbox",{key:"day2"+t.$index,attrs:{disabled:!e.selectedWeek},model:{value:e.wholeSpareList.day2[t.$index],callback:function(a){var r=e.wholeSpareList.day2,o=t.$index;Array.isArray(r)?r.splice(o,1,a):e.wholeSpareList.day2[t.$index]=a},expression:"wholeSpareList.day2[scope.$index]"}})]}]])}),e._v(" "),a("el-table-column",{attrs:{label:"星期三",width:"80"},scopedSlots:e._u([["default",function(t){return[a("el-checkbox",{key:"day3"+t.$index,attrs:{disabled:!e.selectedWeek},model:{value:e.wholeSpareList.day3[t.$index],callback:function(a){var r=e.wholeSpareList.day3,o=t.$index;Array.isArray(r)?r.splice(o,1,a):e.wholeSpareList.day3[t.$index]=a},expression:"wholeSpareList.day3[scope.$index]"}})]}]])}),e._v(" "),a("el-table-column",{attrs:{label:"星期四",width:"80"},scopedSlots:e._u([["default",function(t){return[a("el-checkbox",{key:"day4"+t.$index,attrs:{disabled:!e.selectedWeek},model:{value:e.wholeSpareList.day4[t.$index],callback:function(a){var r=e.wholeSpareList.day4,o=t.$index;Array.isArray(r)?r.splice(o,1,a):e.wholeSpareList.day4[t.$index]=a},expression:"wholeSpareList.day4[scope.$index]"}})]}]])}),e._v(" "),a("el-table-column",{attrs:{label:"星期五",width:"80"},scopedSlots:e._u([["default",function(t){return[a("el-checkbox",{key:"day5"+t.$index,attrs:{disabled:!e.selectedWeek},model:{value:e.wholeSpareList.day5[t.$index],callback:function(a){var r=e.wholeSpareList.day5,o=t.$index;Array.isArray(r)?r.splice(o,1,a):e.wholeSpareList.day5[t.$index]=a},expression:"wholeSpareList.day5[scope.$index]"}})]}]])}),e._v(" "),a("el-table-column",{attrs:{label:"星期六",width:"80"},scopedSlots:e._u([["default",function(t){return[a("el-checkbox",{key:"day6"+t.$index,attrs:{disabled:!e.selectedWeek},model:{value:e.wholeSpareList.day6[t.$index],callback:function(a){var r=e.wholeSpareList.day6,o=t.$index;Array.isArray(r)?r.splice(o,1,a):e.wholeSpareList.day6[t.$index]=a},expression:"wholeSpareList.day6[scope.$index]"}})]}]])}),e._v(" "),a("el-table-column",{attrs:{label:"星期日",width:"80"},scopedSlots:e._u([["default",function(t){return[a("el-checkbox",{key:"day7"+t.$index,attrs:{disabled:!e.selectedWeek},model:{value:e.wholeSpareList.day7[t.$index],callback:function(a){var r=e.wholeSpareList.day7,o=t.$index;Array.isArray(r)?r.splice(o,1,a):e.wholeSpareList.day7[t.$index]=a},expression:"wholeSpareList.day7[scope.$index]"}})]}]])})],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",slot:"footer"},[a("el-button",{on:{click:function(t){e.handleDialogCancel()}}},[e._v("取 消")])],1)],1)],1)},staticRenderFns:[]}},289:function(e,t,a){a(232);var r=a(1)(a(144),a(275),null,null);e.exports=r.exports}});
//# sourceMappingURL=7.f6a7aa214a7eadbbfa28.js.map