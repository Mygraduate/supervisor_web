webpackJsonp([5,11],{1:function(e,t){e.exports=function(e,t,l,a){var o,r=e=e||{},i=typeof e.default;"object"!==i&&"function"!==i||(o=e,r=e.default);var s="function"==typeof r?r.options:r;if(t&&(s.render=t.render,s.staticRenderFns=t.staticRenderFns),l&&(s._scopeId=l),a){var n=s.computed||(s.computed={});Object.keys(a).forEach(function(e){var t=a[e];n[e]=function(){return t}})}return{esModule:o,exports:r,options:s}}},6:function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=l(8),r=a(o);t.default=r.default||function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a])}return e}},11:function(e,t){"use strict";function l(e){var t=e.getFullYear(),l=e.getMonth()+1,o=e.getDate(),r=e.getHours(),i=e.getMinutes(),s=e.getSeconds();return[t,l,o].map(a).join("/")+" "+[r,i,s].map(a).join(":")}function a(e){return e=e.toString(),e[1]?e:"0"+e}function o(e){var t=parseInt(e),l=0,a=0;t>60&&(l=parseInt(t/60),t=parseInt(t%60),l>60&&(a=parseInt(l/60),l=parseInt(l%60)));var o="";return t>0&&(o=""+parseInt(t)+"秒"),l>0&&(o=""+parseInt(l)+"分钟"+o),a>0&&(o=""+parseInt(a)+"小时"+o),o}function r(e){var t=6e4,l=60*t,a=24*l,o=30*a,r=(new Date).getTime(),s=r-i(e),n=s/o,d=s/(7*a),c=s/a,u=s/l,m=s/t;return n>=1?result=parseInt(n)+"个月前":d>=1?result=parseInt(d)+"周前":c>=1?result=parseInt(c)+"天前":u>=1?result=parseInt(u)+"个小时前":m>=1?result=parseInt(m)+"分钟前":result="刚刚",result}function i(e){return Date.parse(e.replace(/-/gi,"/"))}function s(e){var e=new Date(e),t=e.getMinutes(),l=e.getSeconds();return a(t)+":"+a(l)}e.exports={formatTime:l,formatSeconds:o,getDateDiff:r,formatduration:s}},146:function(e,t,l){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&(t[l]=e[l]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=l(8),i=o(r),s=l(6),n=o(s),d=l(4),c=o(d),u=l(11),m=(o(u),l(12)),p=l(13),g=(a(p),l(14)),f=(a(g),l(15));a(f);l(246);var h={title:"",userName:"",roleId:"",roleName:"",phone:"",email:"",weChatId:"",collegeId:null,collegeName:"",userId:"",teacherName:"",teacherId:"",tableId:"",password:""};t.default={name:"cc-UserInfoIndex",data:function(){return{dialogTitle:"",dialogForm:h,dialogFormVisible:!1,formLabelWidth:"80px",dialogType:"ADD",multipleSelection:[],btnDeleteDisable:!0,selectedRole:0,searchName:"",searchTitle:"",searchUsername:"",rule:{userName:[{required:!0,message:"此参数不能为空"}],collegeId:[{required:!0,message:"此参数不能为空"}],roleId:[{required:!0,message:"此参数不能为空"}],phone:[{type:"number",message:"此参数必须为数字值"}],email:[{type:"email",message:"请输入正确的邮箱地址",trigger:"change"}],weChatId:[{required:!0,message:"此参数不能为空"}],password:[{required:!0,message:"此参数不能为空"}]}}},beforeCreate:function(){c.default.log("--UserInfoIndex.Vue--Lifecycle:beforeCreate")},created:function(){c.default.log("--UserInfoIndex.Vue--Lifecycle:created",this.$route.query);var e=this;e.requestUserList((0,n.default)({},e.$route.query,{page:1,pageSize:10})),setTimeout(function(){e.requestCollegeAll({})},200),setTimeout(function(){e.requestAllRole()},500),1!==Number(localStorage.getItem("loginRoleId"))&&setTimeout(function(){e.requestTeacherListAll({})},800);var t=e.$route.query,l=t.name,a=(t.selectedRole,t.username),o=t.title,r=t.roleId;e.searchName=l,e.searchTitle=o,e.selectedRole=r,e.searchUsername=a},beforeMount:function(){c.default.log("--UserInfoIndex.Vue--Lifecycle:beforeMount")},mounted:function(){c.default.log("--UserInfoIndex.Vue--Lifecycle:mounted",this),this.selectedRole=0},updated:function(){c.default.log("--UserInfoIndex.Vue--Lifecycle:updated")},activated:function(){c.default.log("--UserInfoIndex.Vue--Lifecycle:activated")},deactivated:function(){c.default.log("--UserInfoIndex.Vue--Lifecycle:deactivated")},beforeDestroy:function(){c.default.log("--UserInfoIndex.Vue--Lifecycle:beforeDestroy"),this.resetUserState(),this.resetTeacherState()},destroyed:function(){c.default.log("--UserInfoIndex.Vue--Lifecycle:destroyed")},computed:(0,n.default)({},(0,m.mapGetters)(["getUserList","getAllCollegeList","getUserListTotalElements","getRoleList","getAllTeacherList"]),{getBtnSearchDisabled:function(){var e=this.selectedRole,t=this.searchName,l=this.searchTitle,a=this.searchUsername;return!(e>=0||t&&t.trim().length>0||l&&l.trim().length>0||a&&a.trim().length>0)},getDialogOkDisabled:function(){var e=this.dialogForm,t=(e.title,e.userName),l=e.roleId,a=(e.roleName,e.phone,e.email,e.weChatId),o=e.collegeId,r=(e.collegeName,e.userId,e.teacherName,e.teacherId,e.tableId,e.password);return!(l>0&&t.trim().length>0&&o>0&&r.trim().length>0&&a.trim().length>0)},getShowTeacherName:function(){return 1!==Number(localStorage.getItem("loginRoleId"))}}),watch:{multipleSelection:function(e){this.btnDeleteDisable=!(e.length>0)}},methods:(0,n.default)({},(0,m.mapMutations)(["resetUserState","resetTeacherState"]),(0,m.mapActions)(["requestUserList","requestCollegeList","requestUserUpdate","requestUserDelete","requestUserCreate","requestAllRole","requestTeacherListAll","requestCollegeAll"]),{getCurrentPage:function(){var e=this;return e.$route.query.page?Number(e.$route.query.page):1},handleCurrentChange:function(e){var t=this,l=(0,n.default)({},t.$route.query,{page:e,pageSize:10,roleId:t.selectedRole});t.replaceRouter(l),t.requestUserList(l)},showDialog:function(e){var t=this;e?(t.dialogForm=(0,n.default)({},h,e,{tableId:e.tableId}),t.dialogType="UPDATE",t.dialogTitle="修改用户信息"):(t.dialogType="ADD",t.dialogTitle="增加用户"),t.dialogFormVisible=!0},handleDialogCancel:function(){var e=this;e.dialogFormVisible=!1,e.resetDialogForm()},handleDialogOk:function(){var e=this;e.dialogFormVisible=!1;var t={};t="UPDATE"===e.dialogType?{id:e.dialogForm.tableId?e.dialogForm.tableId:null,roleId:e.dialogForm.roleId,uid:e.dialogForm.userId,user:{cid:e.dialogForm.collegeId,tid:e.dialogForm.teacherId,password:e.dialogForm.password,username:e.dialogForm.userName,wecat:e.dialogForm.weChatId,email:e.dialogForm.email,phone:e.dialogForm.phone,id:e.dialogForm.userId}}:{roleId:e.dialogForm.roleId,cid:e.dialogForm.collegeId,tid:e.dialogForm.teacherId,password:e.dialogForm.password,username:e.dialogForm.userName,wecat:e.dialogForm.weChatId,email:e.dialogForm.email,phone:e.dialogForm.phone};var l={body:t,success:function(e){},error:function(e){},complete:function(t){e.resetDialogForm()}};"UPDATE"===e.dialogType?e.requestUserUpdate(l):e.requestUserCreate(l)},resetDialogForm:function(){var e=this;e.dialogForm=(0,i.default)({},{title:"",userName:"",roleId:"",roleName:"",phone:"",email:"",weChatId:"",collegeId:null,collegeName:"",userId:"",teacherName:"",teacherId:"",tableId:"",password:""}),e.$refs.dynamicValidateForm.resetFields()},handleSelectionChange:function(e){this.multipleSelection=e},handleDelete:function(e,t){var l=this;c.default.showMsgBox({context:l,msg:"是否确定删除？",beforeClose:function(e,a,o){if("confirm"===e){var r=[];t&&t.tableId&&r.push({id:t.tableId}),l.multipleSelection.length>0&&(r=r.concat(l.multipleSelection.map(function(e){return{id:e.tableId}}))),l.requestUserDelete({body:r,success:function(e){},error:function(e){},complete:function(e){}}),o()}}})},handleSelectedRoleChange:function(){var e=this,t=e.$route.query.page||1;alert("handleSelectedRoleChange"),e.handleCurrentChange(t)},handleSearch:function(){var e=this,t={username:e.searchUsername,name:e.searchName,title:e.searchTitle,roleId:e.selectedRole,page:1,pageSize:10};e.replaceRouter((0,n.default)({},e.$route.query,t)),e.requestUserList(t)},resetSearchInput:function(){var e=this;e.searchUsername="",e.searchName="",e.searchTitle="",e.selectedRole=0,e.replaceRouter(),e.requestUserList({page:1,pageSize:10})},replaceRouter:function(e){var t=this;t.$router.replace({name:t.$route.name,query:e||null})}})}},196:function(e,t,l){t=e.exports=l(2)(),t.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",file:"UserInfoIndex.vue",sourceRoot:"webpack://"}])},212:function(e,t,l){t=e.exports=l(2)(),t.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",file:"UserInfoIndex.css",sourceRoot:"webpack://"}])},225:function(e,t,l){var a=l(196);"string"==typeof a&&(a=[[e.id,a,""]]);l(3)(a,{});a.locals&&(e.exports=a.locals)},246:function(e,t,l){var a=l(212);"string"==typeof a&&(a=[[e.id,a,""]]);l(3)(a,{});a.locals&&(e.exports=a.locals)},268:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"TeacherInfoIndex-box"},[l("el-row",{staticClass:"mg-top10 mg-left10 mg-bottom10"},[l("el-col",[e._v("用户类型：\n      "),l("el-radio-group",{staticClass:"mg-left30",model:{value:e.selectedRole,callback:function(t){e.selectedRole=t},expression:"selectedRole"}},[l("el-radio",{attrs:{label:0}},[e._v("全部")]),e._v(" "),l("el-radio",{attrs:{label:2}},[e._v("督导管理员")]),e._v(" "),l("el-radio",{attrs:{label:3}},[e._v("督导员")]),e._v(" "),l("el-radio",{attrs:{label:4}},[e._v("教师")])],1)],1)],1),e._v(" "),l("el-row",{staticClass:"mg-top10 mg-left10 mg-bottom10",attrs:{gutter:20}},[l("el-col",{attrs:{span:6}},[e._v("教师名：\n      "),l("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入用户名"},model:{value:e.searchName,callback:function(t){e.searchName=t},expression:"searchName"}})],1),e._v(" "),l("el-col",{attrs:{span:6}},[e._v("教师职称：\n      "),l("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入用户职称"},model:{value:e.searchTitle,callback:function(t){e.searchTitle=t},expression:"searchTitle"}})],1),e._v(" "),l("el-col",{attrs:{span:6}},[e._v("用户账号：\n      "),l("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入用户账号"},model:{value:e.searchUsername,callback:function(t){e.searchUsername=t},expression:"searchUsername"}})],1)],1),e._v(" "),l("div",{staticClass:"block mg-top10 mg-left10 mg-right10  mg-bottom10",staticStyle:{"text-align":"right"}},[l("span",{staticClass:"wrapper "},[l("el-button",{attrs:{type:"primary",disabled:e.getBtnSearchDisabled},on:{click:function(t){e.handleSearch()}}},[e._v("搜索")]),e._v(" "),l("el-button",{on:{click:function(t){e.resetSearchInput()}}},[e._v("重置")]),e._v(" "),l("el-button",{attrs:{type:"success"},on:{click:function(t){e.showDialog()}}},[e._v("添加")]),e._v(" "),l("el-button",{attrs:{type:"danger",disabled:e.btnDeleteDisable},on:{click:function(t){e.handleDelete()}}},[e._v("删除")])],1)]),e._v(" "),l("el-table",{staticClass:"tempform-table",staticStyle:{width:"100%"},attrs:{data:e.getUserList,border:""},on:{"selection-change":e.handleSelectionChange}},[l("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),l("el-table-column",{attrs:{prop:"userName",label:"账号",width:"200"}}),e._v(" "),l("el-table-column",{attrs:{prop:"title",label:"教师职称",width:"100"}}),e._v(" "),l("el-table-column",{attrs:{prop:"collegeName",label:"所属学院",width:"180"}}),e._v(" "),l("el-table-column",{attrs:{prop:"roleName",label:"角色","show-overflow-tooltip":""}}),e._v(" "),l("el-table-column",{attrs:{prop:"phone",label:"手机号",width:"150"}}),e._v(" "),l("el-table-column",{attrs:{prop:"email",label:"邮件",width:"150"}}),e._v(" "),l("el-table-column",{attrs:{prop:"weChatId",label:"微信号",width:"150"}}),e._v(" "),l("el-table-column",{attrs:{prop:"opertate",label:"操作",width:"180"},scopedSlots:e._u([["default",function(t){return[l("el-button",{attrs:{size:"small"},on:{click:function(l){e.showDialog(t.row)}}},[e._v("修改")]),e._v(" "),l("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(l){e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}]])})],1),e._v(" "),l("div",{staticClass:"block ta-c mg-top10"},[l("el-pagination",{attrs:{"current-page":e.getCurrentPage(),"page-size":10,layout:"prev, pager, next, jumper",total:e.getUserListTotalElements},on:{"current-change":e.handleCurrentChange}})],1),e._v(" "),l("el-dialog",{attrs:{title:e.dialogTitle,modal:!1,"show-close":!1,size:"tiny"},model:{value:e.dialogFormVisible,callback:function(t){e.dialogFormVisible=t},expression:"dialogFormVisible"}},[l("el-form",{ref:"dynamicValidateForm",attrs:{model:e.dialogForm,rules:e.rule}},[l("el-form-item",{attrs:{label:"用户名:","label-width":e.formLabelWidth,prop:"userName"}},[l("el-input",{attrs:{"auto-complete":"off",minlength:1},model:{value:e.dialogForm.userName,callback:function(t){e.dialogForm.userName=t},expression:"dialogForm.userName"}})],1),e._v(" "),e.getShowTeacherName?l("el-form-item",{attrs:{label:"教师姓名:","label-width":e.formLabelWidth}},[l("el-select",{attrs:{placeholder:"请选择"},model:{value:e.dialogForm.teacherId,callback:function(t){e.dialogForm.teacherId=t},expression:"dialogForm.teacherId"}},e._l(e.getAllTeacherList,function(e){return l("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1):e._e(),e._v(" "),l("el-form-item",{attrs:{label:"学院:","label-width":e.formLabelWidth,prop:"collegeId"}},[l("el-select",{attrs:{placeholder:"请选择"},model:{value:e.dialogForm.collegeId,callback:function(t){e.dialogForm.collegeId=t},expression:"dialogForm.collegeId"}},e._l(e.getAllCollegeList,function(e){return l("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),l("el-form-item",{attrs:{label:"角色:","label-width":e.formLabelWidth,prop:"roleId"}},[l("el-select",{attrs:{placeholder:"请选择"},model:{value:e.dialogForm.roleId,callback:function(t){e.dialogForm.roleId=t},expression:"dialogForm.roleId"}},e._l(e.getRoleList,function(e){return l("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),l("el-form-item",{attrs:{label:"手机号:","label-width":e.formLabelWidth}},[l("el-input",{attrs:{"auto-complete":"off",minlength:1},model:{value:e.dialogForm.phone,callback:function(t){e.dialogForm.phone=t},expression:"dialogForm.phone"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"邮件:","label-width":e.formLabelWidth,prop:"email"}},[l("el-input",{attrs:{"auto-complete":"off",minlength:1},model:{value:e.dialogForm.email,callback:function(t){e.dialogForm.email=t},expression:"dialogForm.email"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"微信号:","label-width":e.formLabelWidth,prop:"weChatId"}},[l("el-input",{attrs:{"auto-complete":"off"},model:{value:e.dialogForm.weChatId,callback:function(t){e.dialogForm.weChatId=t},expression:"dialogForm.weChatId"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"密码:","label-width":e.formLabelWidth,prop:"weChapasswordtId"}},[l("el-input",{attrs:{type:"password","auto-complete":"off"},model:{value:e.dialogForm.password,callback:function(t){e.dialogForm.password=t},expression:"dialogForm.password"}})],1)],1),e._v(" "),l("div",{staticClass:"dialog-footer",slot:"footer"},[l("el-button",{on:{click:function(t){e.handleDialogCancel()}}},[e._v("取 消")]),e._v(" "),l("el-button",{attrs:{type:"primary",disabled:e.getDialogOkDisabled},on:{click:function(t){e.handleDialogOk()}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]}},291:function(e,t,l){l(225);var a=l(1)(l(146),l(268),null,null);e.exports=a.exports}});
//# sourceMappingURL=5.312b95abf110c19dbe8d.js.map